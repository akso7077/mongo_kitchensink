# mongo_kitchensink
# Kitchen Sink Application

A Spring Boot application demonstrating common backend features including user authentication, authorization, and basic CRUD operations, utilizing JWTs and MongoDB. This project serves as a practical example for learning and implementing core backend concepts.

## Features

* **User Authentication:**
    * User Registration (Sign Up)
    * User Login (Sign In)
    * JWT (JSON Web Token) based stateless authentication
    * Refresh Token mechanism for renewing access tokens
* **User Authorization:**
    * Role-Based Access Control (RBAC) with `ROLE_USER` and `ROLE_ADMIN`
    * Securing API endpoints based on roles (`@PreAuthorize`)
* **User Management:**
    * Admin endpoint to list all users (requires `ROLE_ADMIN`)
* **Contact Management:**
    * Basic CRUD (Create, Read, Update, Delete) operations for Contacts
    * Secured endpoints for contact operations
* **Data Validation:**
    * Input validation using Bean Validation annotations (`@Valid`, `@NotBlank`, `@Size`, etc.)
* **Global Error Handling:**
    * Centralized exception handling using `@ControllerAdvice` and `@ExceptionHandler` for consistent API responses (e.g., handling validation errors, resource not found, authentication failures).
* **API Documentation:**
    * Interactive API documentation via Swagger UI (generated by Springdoc OpenAPI).

## Technologies Used

* **Backend:** Spring Boot 3.x
* **Language:** Java 21
* **Security:** Spring Security 6.x, JJWT (JSON Web Tokens)
* **Database:** MongoDB
* **Data Access:** Spring Data MongoDB
* **Build Tool:** Apache Maven
* **Utilities:** Lombok
* **Validation:** Jakarta Bean Validation
* **API Docs:** Springdoc OpenAPI
* **Testing:** JUnit 5, Mockito, AssertJ, Spring Boot Starter Test, Spring Security Test, Flapdoodle Embedded MongoDB (for tests), JaCoCo (Code Coverage)

## Setup and Running

1.  **Prerequisites:**
    * JDK 21 or higher installed.
    * Apache Maven installed.
    * A running MongoDB instance.

2.  **Clone the Repository:**
    ```bash
    # Replace with the actual repository URL if hosted
    git clone <repository_url>
    cd kitchensink-app # Adjust if your root directory name is different
    ```

3.  **Configure Database and JWT Settings:**
    * Open the `src/main/resources/application.properties` (or `application.yml`) file.
    * Update the MongoDB connection details if needed (e.g., `spring.data.mongodb.uri`).
    * Configure your JWT settings:
        ```properties
        # application.properties example
        app.jwt.secret=<YourVerySecureSecretKey> # Use a strong, unique key (e.g., 32+ characters)
        app.jwt.expiration=86400000 # JWT Access Token expiration in milliseconds (e.g., 24 hours)
        app.jwt.refreshExpiration=604800000 # Refresh Token expiration in milliseconds (e.g., 7 days)
        ```
        Replace `<YourVerySecureSecretKey>` with a unique, strong secret.

4.  **Build the Project:**
    ```bash
    mvn clean install
    ```
    This will compile the code, run tests, and package the application.

5.  **Run the Application:**
    ```bash
    mvn spring-boot:run
    ```
    The application will start, usually on port 8080 (check logs for the exact port).

6.  **Access the Running App:**
    * The backend API will be available (default: `http://localhost:8080`).
    * Access the Swagger UI for API documentation at `http://localhost:8080/swagger-ui.html`.

## Running Tests and Generating Coverage Report

* To run all unit and integration tests and generate a code coverage report:
    ```bash
    mvn clean verify
    ```
* After the command completes, open the generated JaCoCo coverage report in your web browser:
    * Navigate to `<project_root>/target/site/jacoco/index.html`
    * Open the `index.html` file.

## API Documentation

Swagger UI, generated by Springdoc OpenAPI, provides interactive documentation for all your endpoints.

* Access at: `http://localhost:8080/swagger-ui.html`
* Here you can see available endpoints, their parameters, expected responses, and even try them out directly in the browser.
